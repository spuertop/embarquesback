import{_ as k,r as s,o as m,f,e as o,w as r,F as h,i as l,I as _,h as w,K as y,Q as i,g as Q,ax as v,z as x,c as V}from"./index.b3b9bf60.js";import{Q as u,a as S}from"./index.02a9b9ea.js";import{C as P,a as D,Q as q,b as B,c as I}from"./index.6aa0f8b7.js";import{Q as A}from"./QPage.7f5d5fe5.js";import{Q as E,a as z,b as F,C as b}from"./ClosePopup.88bb9aed.js";import{Q as U}from"./QDialog.ecc2b44f.js";import{u as L}from"./global.8171e759.js";import"./use-dark.1b9aa30d.js";import"./use-form.18fd5177.js";import"./touch.70a9dd44.js";import"./selection.cfc0b11e.js";import"./use-timeout.ceefd4b8.js";import"./axios.f60c3e4a.js";const N={setup(){const n=L();n.getPhotos();const a=s("photo"),c=s(""),e=s(1);function p(){n.changeAE()}async function g(){const d=await P.getPhoto({quality:75,allowEditing:!1,resultType:D.Base64,source:"CAMERA",correctOrientation:!0});c.value="data:image/jpeg;base64, "+d.base64String,console.log(d.base64String),await n.uploadPhoto(d.base64String),n.getPhotos()}async function t(){await n.deletePhoto(n.photoList[e.value-1].name),await n.getPhotos(),e.value=1}const C=s(!1);return{globalStore:n,action:a,nuevaEntrega:p,imageSrc:c,captureImage:g,slide:e,deleteImg:t,confirmDel:C}}},R={class:"text-center text-h5 text-weight-bold"},T={class:"text-center",style:{"font-size":"16px"}},j={class:"q-pa-sm",style:{"font-size":"16px"}},G={class:"row items-center"},H=l("div",{class:"col-3"},"Albar\xE1n",-1),K={class:"col"},M={class:"row items-center q-pt-sm"},O={class:"col-12 flex justify-center"},J={class:"text-center text-orange",style:{"font-size":"16px"}},W=l("br",null,null,-1),X=l("br",null,null,-1),Y=l("span",{class:"q-ml-sm"},"\xBFBorrar la foto definitivamente?",-1);function Z(n,a,c,e,p,g){return m(),f(h,null,[o(A,{class:"flex-center q-pa-md"},{default:r(()=>[l("div",R,[o(_,{name:"photo_camera"}),w(" Fotografiar "+y(e.globalStore.customer)+" ",1),o(_,{name:"photo_camera"})]),l("div",T,[o(u,{modelValue:e.action,"onUpdate:modelValue":a[0]||(a[0]=t=>e.action=t),class:"text-grey-5","checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"load",label:"Cargar",onClick:a[1]||(a[1]=t=>this.$router.push({path:"/readings",query:{action:"load"}}))},null,8,["modelValue"]),o(u,{modelValue:e.action,"onUpdate:modelValue":a[2]||(a[2]=t=>e.action=t),class:"text-grey-5","checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"download",label:"Descargar",onClick:a[3]||(a[3]=t=>this.$router.push({path:"/readings",query:{action:"download"}}))},null,8,["modelValue"]),o(u,{modelValue:e.action,"onUpdate:modelValue":a[4]||(a[4]=t=>e.action=t),class:"text-primary","checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"photo",label:"Fotografiar"},null,8,["modelValue"])]),l("div",j,[l("div",G,[H,l("div",K,y(e.globalStore.aedocument),1)]),l("div",M,[l("div",O,[o(i,{style:{width:"100vw"},icon:"photo_camera",color:"primary",label:"Hacer Foto",onClick:e.captureImage},null,8,["onClick"])])])]),o(q,{animated:"",modelValue:e.slide,"onUpdate:modelValue":a[5]||(a[5]=t=>e.slide=t),arrows:"",navigation:"",infinite:"","control-type":"regular","control-color":"primary","navigation-position":"top",style:{height:"50vh"}},{default:r(()=>[(m(!0),f(h,null,Q(e.globalStore.photoList,t=>(m(),V(I,{key:t.id,name:t.id,class:"no-margin no-padding"},{default:r(()=>[o(B,{src:t.src,contain:"",sizes:"(max-width: 600px) 480px, 800px"},null,8,["src"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"]),o(S,{position:"bottom",offset:[0,18]},{default:r(()=>[l("div",J,[o(v,{icon:"delete",color:"primary","text-color":"white",onClick:a[6]||(a[6]=t=>e.confirmDel=!0)}),W,X]),o(i,{style:{width:"95vw"},color:"accent","text-color":"white",label:"Cargar otra entrega","no-caps":"",onClick:e.nuevaEntrega},null,8,["onClick"])]),_:1})]),_:1}),o(U,{modelValue:e.confirmDel,"onUpdate:modelValue":a[7]||(a[7]=t=>e.confirmDel=t),persistent:""},{default:r(()=>[o(E,null,{default:r(()=>[o(z,{class:"row items-center"},{default:r(()=>[o(v,{icon:"delete",color:"primary","text-color":"white"}),Y]),_:1}),o(F,{align:"right"},{default:r(()=>[x(o(i,{flat:"",label:"Cancelar",color:"secondary"},null,512),[[b]]),x(o(i,{flat:"",label:"S\xED, borrar",color:"primary",onClick:e.deleteImg},null,8,["onClick"]),[[b]])]),_:1})]),_:1})]),_:1},8,["modelValue"])],64)}var ue=k(N,[["render",Z]]);export{ue as default};
