var we=Object.defineProperty,ke=Object.defineProperties;var qe=Object.getOwnPropertyDescriptors;var W=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable;var J=(t,r,s)=>r in t?we(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s,w=(t,r)=>{for(var s in r||(r={}))Ce.call(r,s)&&J(t,s,r[s]);if(W)for(var s of W(r))xe.call(r,s)&&J(t,s,r[s]);return t},B=(t,r)=>ke(t,qe(r));import{j as U,aa as Qe,ab as Te,k as u,l as z,H as ue,u as ce,s as de,aj as De,r as g,ad as Pe,ag as Be,ah as Ee,z as N,_ as Ve,at as He,x as Ae,o as O,c as Z,w as k,i as S,e as f,I as j,h as M,K as E,au as L,a7 as $,av as Fe,f as Me,g as Ne,F as Oe,Q as ee}from"./index.ad099f98.js";import{Q as R,a as je}from"./index.5ebd5fcc.js";import{Q as Le}from"./QInput.bd343c76.js";import{u as ve,a as fe}from"./use-dark.17c46a23.js";import{Q as Re}from"./QChip.247f9ca3.js";import{Q as te,a as Ie,T as ae}from"./QScrollObserver.283f0eb4.js";import{b as F}from"./format.a33550d6.js";import{s as le,j as oe}from"./use-timeout.8bacfa94.js";import{Q as Ke,a as re,b as Ue,C as Ye}from"./ClosePopup.45363672.js";import{Q as Xe}from"./QDialog.abfc31bc.js";import{Q as Ge}from"./QPage.ee2e9499.js";import{u as We}from"./global.b862c566.js";import{K as I}from"./index.981bbc56.js";import"./use-form.4c4245c9.js";import"./touch.70a9dd44.js";import"./selection.f103b8d1.js";import"./axios.8b6e0f41.js";const Je={xs:2,sm:4,md:6,lg:10,xl:14};function ne(t,r,s){return{transform:r===!0?`translateX(${s.lang.rtl===!0?"-":""}100%) scale3d(${-t},1,1)`:`scale3d(${t},1,1)`}}var Ze=U({name:"QLinearProgress",props:B(w(w({},ve),Qe),{value:{type:Number,default:0},buffer:Number,color:String,trackColor:String,reverse:Boolean,stripe:Boolean,indeterminate:Boolean,query:Boolean,rounded:Boolean,animationSpeed:{type:[String,Number],default:2100},instantFeedback:Boolean}),setup(t,{slots:r}){const{proxy:s}=ce(),l=fe(t,s.$q),h=Te(t,Je),v=u(()=>t.indeterminate===!0||t.query===!0),o=u(()=>t.reverse!==t.query),e=u(()=>B(w({},h.value!==null?h.value:{}),{"--q-linear-progress-speed":`${t.animationSpeed}ms`})),y=u(()=>"q-linear-progress"+(t.color!==void 0?` text-${t.color}`:"")+(t.reverse===!0||t.query===!0?" q-linear-progress--reverse":"")+(t.rounded===!0?" rounded-borders":"")),q=u(()=>ne(t.buffer!==void 0?t.buffer:1,o.value,s.$q)),p=u(()=>`q-linear-progress__track absolute-full q-linear-progress__track--with${t.instantFeedback===!0?"out":""}-transition q-linear-progress__track--${l.value===!0?"dark":"light"}`+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),C=u(()=>ne(v.value===!0?1:t.value,o.value,s.$q)),m=u(()=>`q-linear-progress__model absolute-full q-linear-progress__model--with${t.instantFeedback===!0?"out":""}-transition q-linear-progress__model--${v.value===!0?"in":""}determinate`),Q=u(()=>({width:`${t.value*100}%`})),T=u(()=>`q-linear-progress__stripe absolute-${t.reverse===!0?"right":"left"}`);return()=>{const i=[z("div",{class:p.value,style:q.value}),z("div",{class:m.value,style:C.value})];return t.stripe===!0&&v.value===!1&&i.push(z("div",{class:T.value,style:Q.value})),z("div",{class:y.value,style:e.value,role:"progressbar","aria-valuemin":0,"aria-valuemax":1,"aria-valuenow":t.indeterminate===!0?void 0:t.value},ue(r.default,i))}}}),$e=U({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(t,{slots:r,emit:s}){let l=!1,h,v,o,e,y,q;function p(){h&&h(),h=null,l=!1,clearTimeout(o),clearTimeout(e),v!==void 0&&v.removeEventListener("transitionend",y),y=null}function C(i,_,d){i.style.overflowY="hidden",_!==void 0&&(i.style.height=`${_}px`),i.style.transition=`height ${t.duration}ms cubic-bezier(.25, .8, .50, 1)`,l=!0,h=d}function m(i,_){i.style.overflowY=null,i.style.height=null,i.style.transition=null,p(),_!==q&&s(_)}function Q(i,_){let d=0;v=i,l===!0?(p(),d=i.offsetHeight===i.scrollHeight?0:void 0):q="hide",C(i,d,_),o=setTimeout(()=>{i.style.height=`${i.scrollHeight}px`,y=b=>{(Object(b)!==b||b.target===i)&&m(i,"show")},i.addEventListener("transitionend",y),e=setTimeout(y,t.duration*1.1)},100)}function T(i,_){let d;v=i,l===!0?p():(q="show",d=i.scrollHeight),C(i,d,_),o=setTimeout(()=>{i.style.height=0,y=b=>{(Object(b)!==b||b.target===i)&&m(i,"hide")},i.addEventListener("transitionend",y),e=setTimeout(y,t.duration*1.1)},100)}return de(()=>{l===!0&&p()}),()=>z(De,{css:!1,appear:t.appear,onEnter:Q,onLeave:T},r.default)}});const ie=["vertical","horizontal"],K={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},se={prevent:!0,mouse:!0,mouseAllDir:!0};var et=U({name:"QScrollArea",props:B(w({},ve),{thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function}),setup(t,{slots:r,emit:s}){const l=g(!1),h=g(!1),v=g(!1),o={vertical:g(0),horizontal:g(0)},e={vertical:{ref:g(null),position:g(0),size:g(0)},horizontal:{ref:g(null),position:g(0),size:g(0)}},y=ce(),q=fe(t,y.proxy.$q);let p,C;const m=g(null),Q=u(()=>"q-scrollarea"+(q.value===!0?" q-scrollarea--dark":""));e.vertical.percentage=u(()=>{const a=e.vertical.size.value-o.vertical.value;if(a<=0)return 0;const n=F(e.vertical.position.value/a,0,1);return Math.round(n*1e4)/1e4}),e.vertical.thumbHidden=u(()=>(t.visible===null?v.value:t.visible)!==!0&&l.value===!1&&h.value===!1||e.vertical.size.value<=o.vertical.value+1),e.vertical.thumbStart=u(()=>e.vertical.percentage.value*(o.vertical.value-e.vertical.thumbSize.value)),e.vertical.thumbSize=u(()=>Math.round(F(o.vertical.value*o.vertical.value/e.vertical.size.value,50,o.vertical.value))),e.vertical.style=u(()=>B(w(w({},t.thumbStyle),t.verticalThumbStyle),{top:`${e.vertical.thumbStart.value}px`,height:`${e.vertical.thumbSize.value}px`})),e.vertical.thumbClass=u(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.vertical.barClass=u(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(e.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),e.horizontal.percentage=u(()=>{const a=e.horizontal.size.value-o.horizontal.value;if(a<=0)return 0;const n=F(e.horizontal.position.value/a,0,1);return Math.round(n*1e4)/1e4}),e.horizontal.thumbHidden=u(()=>(t.visible===null?v.value:t.visible)!==!0&&l.value===!1&&h.value===!1||e.horizontal.size.value<=o.horizontal.value+1),e.horizontal.thumbStart=u(()=>e.horizontal.percentage.value*(o.horizontal.value-e.horizontal.thumbSize.value)),e.horizontal.thumbSize=u(()=>Math.round(F(o.horizontal.value*o.horizontal.value/e.horizontal.size.value,50,o.horizontal.value))),e.horizontal.style=u(()=>B(w(w({},t.thumbStyle),t.horizontalThumbStyle),{left:`${e.horizontal.thumbStart.value}px`,width:`${e.horizontal.thumbSize.value}px`})),e.horizontal.thumbClass=u(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),e.horizontal.barClass=u(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(e.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const T=u(()=>e.vertical.thumbHidden.value===!0&&e.horizontal.thumbHidden.value===!0?t.contentStyle:t.contentActiveStyle),i=[[ae,a=>{Y(a,"vertical")},void 0,w({vertical:!0},se)]],_=[[ae,a=>{Y(a,"horizontal")},void 0,w({horizontal:!0},se)]];function d(){const a={};return ie.forEach(n=>{const c=e[n];a[n+"Position"]=c.position.value,a[n+"Percentage"]=c.percentage.value,a[n+"Size"]=c.size.value,a[n+"ContainerSize"]=o[n].value}),a}const b=Pe(()=>{const a=d();a.ref=y.proxy,s("scroll",a)},0);function x(a,n,c){if(ie.includes(a)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(a==="vertical"?le:oe)(m.value,n,c)}function P({height:a,width:n}){let c=!1;o.vertical.value!==a&&(o.vertical.value=a,c=!0),o.horizontal.value!==n&&(o.horizontal.value=n,c=!0),c===!0&&V()}function he({position:a}){let n=!1;e.vertical.position.value!==a.top&&(e.vertical.position.value=a.top,n=!0),e.horizontal.position.value!==a.left&&(e.horizontal.position.value=a.left,n=!0),n===!0&&V()}function me({height:a,width:n}){e.horizontal.size.value!==n&&(e.horizontal.size.value=n,V()),e.vertical.size.value!==a&&(e.vertical.size.value=a,V())}function Y(a,n){const c=e[n];if(a.isFirst===!0){if(c.thumbHidden.value===!0)return;C=c.position.value,h.value=!0}else if(h.value!==!0)return;a.isFinal===!0&&(h.value=!1);const D=K[n],A=o[n].value,ze=(c.size.value-A)/(A-c.thumbSize.value),_e=a.distance[D.dist],pe=C+(a.direction===D.dir?1:-1)*_e*ze;G(pe,n)}function X(a,n){const c=e[n];if(c.thumbHidden.value!==!0){const D=a[K[n].offset];if(D<c.thumbStart.value||D>c.thumbStart.value+c.thumbSize.value){const A=D-c.thumbSize.value/2;G(A/o[n].value*c.size.value,n)}c.ref.value!==null&&c.ref.value.dispatchEvent(new MouseEvent(a.type,a))}}function be(a){X(a,"vertical")}function ge(a){X(a,"horizontal")}function V(){l.value===!0?clearTimeout(p):l.value=!0,p=setTimeout(()=>{l.value=!1},t.delay),t.onScroll!==void 0&&b()}function G(a,n){m.value[K[n].scroll]=a}function ye(){v.value=!0}function Se(){v.value=!1}Object.assign(y.proxy,{getScrollTarget:()=>m.value,getScroll:d,getScrollPosition:()=>({top:e.vertical.position.value,left:e.horizontal.position.value}),getScrollPercentage:()=>({top:e.vertical.percentage.value,left:e.horizontal.percentage.value}),setScrollPosition:x,setScrollPercentage(a,n,c){x(a,n*(e[a].size.value-o[a].value),c)}});let H=null;return Be(()=>{H={top:e.vertical.position.value,left:e.horizontal.position.value}}),Ee(()=>{if(H===null)return;const a=m.value;a!==null&&(oe(a,H.left),le(a,H.top))}),de(b.cancel),()=>z("div",{class:Q.value,onMouseenter:ye,onMouseleave:Se},[z("div",{ref:m,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:t.tabindex!==void 0?t.tabindex:void 0},[z("div",{class:"q-scrollarea__content absolute",style:T.value},ue(r.default,[z(te,{debounce:0,onResize:me})])),z(Ie,{axis:"both",onScroll:he})]),z(te,{debounce:0,onResize:P}),z("div",{class:e.vertical.barClass.value,style:[t.barStyle,t.verticalBarStyle],"aria-hidden":"true",onMousedown:be}),z("div",{class:e.horizontal.barClass.value,style:[t.barStyle,t.horizontalBarStyle],"aria-hidden":"true",onMousedown:ge}),N(z("div",{ref:e.vertical.ref,class:e.vertical.thumbClass.value,style:e.vertical.style.value,"aria-hidden":"true"}),i),N(z("div",{ref:e.horizontal.ref,class:e.horizontal.thumbClass.value,style:e.horizontal.style.value,"aria-hidden":"true"}),_)])}});const tt={setup(){const t=He(),r=We(),s=g("load");t.currentRoute.value.query.action&&(s.value=t.currentRoute.value.query.action);const l=g(""),h=g(null),v=new Audio("../mixkit-wrong-long-buzzer-954.wav"),o=g(!1),e=g(""),y=u(()=>{let d=r.aeinfo.lecturas.length;return r.aeinfo.lecturas.filter(x=>x.NroDS===!0).length/d}),q=u(()=>s.value==="load"?"upload":s.value==="download"?"download":"photo_camera"),p=u(()=>s.value==="load"?"Cargando":s.value==="download"?"Descargando":"Fotografiar"),C=u(()=>{let d=r.aeinfo.lecturas.length;return r.aeinfo.lecturas.filter(x=>x.NroDS===!0).length/d===1});I.addListener("keyboardWillShow",m),I.addListener("keyboardDidShow",m);function m(){l.value="",h.value.focus(),I.hide()}async function Q(){let d={ae:r.aedocument,ud:l.value,empresa:r.customer};if(T(s.value)){if(s.value==="load"){const b=await r.uploadUnit(d);console.log(b),m()}if(s.value==="download"){const b=await r.downloadUnit(d);console.log(b),m()}}}function T(d){let x=r.aeinfo.lecturas.filter(P=>P.Descripcion===l.value);if(x.length>0){let P=x[0].NroDS;return d==="load"&&P===!0?(e.value="Esto ya esta cargado.",o.value=!0,v.play(),!1):d==="download"&&P===null?(e.value="Esto ya est\xE1 descargado",o.value=!0,v.play(),!1):!0}else return e.value="No pertenece a este pedido.",o.value=!0,v.play(),!1}function i(){v.play()}async function _(){await r.changeAE()!==void 0&&(e.value="Haz m\xEDnimo una foto",o.value=!0,v.play())}return Ae(()=>{m()}),{globalStore:r,action:s,radioIcons:q,radioText:p,barcode:l,returnFocus:m,barcodeinput:h,progress:y,readBarcode:Q,alert:o,alertMsg:e,playError:i,nuevaEntrega:_,visibleEnd:C}}},at={class:"text-center text-h5 text-weight-bold"},lt={class:"text-center",style:{"font-size":"16px"}},ot={class:"q-pa-none",style:{"font-size":"16px"}},rt={class:"row items-center"},nt=S("div",{class:"col-3"},"Albar\xE1n",-1),it={class:"col"},st={class:"row items-center"},ut=S("div",{class:"col-3"},"Agencia",-1),ct={class:"col"},dt={class:"row items-center"},vt=S("div",{class:"col-3"},"Barras",-1),ft={class:"col"},ht={class:"q-pa-sm"},mt={class:"text-center q-pa-sm"},bt={class:"text-h5"},gt=M("Todo Cargado "),yt=S("div",{class:"text-h6"},"Error",-1);function St(t,r,s,l,h,v){return O(),Z(Ge,{class:"flex-center q-pa-md"},{default:k(()=>[S("div",at,[f(j,{name:l.radioIcons},null,8,["name"]),M(" "+E(l.radioText)+" "+E(l.globalStore.customer)+" ",1),f(j,{name:l.radioIcons},null,8,["name"])]),S("div",lt,[f(R,{modelValue:l.action,"onUpdate:modelValue":r[0]||(r[0]=o=>l.action=o),class:L(l.action==="load"?"text-primary":"text-grey-5"),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"load",label:"Cargar",onClick:l.returnFocus},null,8,["modelValue","class","onClick"]),f(R,{modelValue:l.action,"onUpdate:modelValue":r[1]||(r[1]=o=>l.action=o),class:L(l.action==="download"?"text-primary":"text-grey-5"),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"download",label:"Descargar",onClick:l.returnFocus},null,8,["modelValue","class","onClick"]),f(R,{modelValue:l.action,"onUpdate:modelValue":r[2]||(r[2]=o=>l.action=o),class:L(l.action==="photo"?"text-primary":"text-grey-5"),"checked-icon":"task_alt","unchecked-icon":"panorama_fish_eye",val:"photo",label:"Fotografiar",onClick:r[3]||(r[3]=o=>this.$router.push("/photos"))},null,8,["modelValue","class"])]),S("div",ot,[S("div",rt,[nt,S("div",it,E(l.globalStore.aedocument),1)]),S("div",st,[ut,S("div",ct,E(l.globalStore.aeinfo.agencia.CodigoDeServicioDeTransporte),1)]),S("div",dt,[vt,S("div",ft,[f(Le,{class:"no-margin no-padding",dense:"",modelValue:l.barcode,"onUpdate:modelValue":r[4]||(r[4]=o=>l.barcode=o),ref:"barcodeinput",onKeyup:$(l.readBarcode,["enter"])},null,8,["modelValue","onKeyup"])])])]),S("div",ht,[f(Ze,{value:l.progress,rounded:"",stripe:"",size:"15px",color:"positive",class:"q-mt-sm"},null,8,["value"]),f($e,null,{default:k(()=>[N(S("div",mt,[S("span",bt,[gt,f(j,{color:"positive",name:"check_circle"})])],512),[[Fe,l.visibleEnd]])]),_:1}),f(et,{class:"q-pt-xs",style:{height:"38vh","max-width":"95vw"}},{default:k(()=>[(O(!0),Me(Oe,null,Ne(l.globalStore.aeinfo.lecturas,o=>(O(),Z(Re,{size:"md",key:o.Descripcion,color:o.NroDS?l.action==="load"?"positive":"primary":"","text-color":"white"},{default:k(()=>[M(E(o.Descripcion2),1)]),_:2},1032,["color"]))),128))]),_:1})]),f(Xe,{persistent:"",modelValue:l.alert,"onUpdate:modelValue":r[5]||(r[5]=o=>l.alert=o),onKeyup:$(l.playError,["enter"])},{default:k(()=>[f(Ke,null,{default:k(()=>[f(re,null,{default:k(()=>[yt]),_:1}),f(re,{class:"bg-negative text-white"},{default:k(()=>[M(E(l.alertMsg),1)]),_:1}),f(Ue,{align:"right"},{default:k(()=>[N(f(ee,{flat:"",label:"ENTENDIDO",color:"primary",onClick:l.returnFocus},null,8,["onClick"]),[[Ye]])]),_:1})]),_:1})]),_:1},8,["modelValue","onKeyup"]),f(je,{position:"bottom",offset:[0,18]},{default:k(()=>[f(ee,{style:{width:"95vw"},color:"accent","text-color":"white",label:"Cargar otra entrega","no-caps":"",onClick:l.nuevaEntrega},null,8,["onClick"])]),_:1})]),_:1})}var Mt=Ve(tt,[["render",St]]);export{Mt as default};
